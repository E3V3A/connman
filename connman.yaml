Name: connman
Summary: Connection Manager
Version: 1.3
Release: 1
Group: Communications/ConnMan
License: GPLv2
URL: http://connman.net/
Sources:
    - http://www.kernel.org/pub/linux/network/connman/%{name}-%{version}.tar.xz
    - connman.tracing
Patches:
    - connman-1.1-tracing.patch
Description: |
    Connection Manager provides a daemon for managing Internet connections
    within embedded devices running the Linux operating system.

Requires:
    - dbus >= 1.4
    - wpa_supplicant >= 0.7.1
    - bluez
    - ofono
    - pacrunner

PkgBR:
    - openconnect
    - openvpn
PkgConfigBR:
    - xtables
    - glib-2.0 >= 2.28
    - gthread-2.0 >= 2.16
    - dbus-1 >= 1.4
    - gnutls

Configure: configure
ConfigOptions:
    - --enable-threads
    - --enable-ethernet=builtin
    - --enable-wifi=builtin
    - --enable-bluetooth=builtin
    - --enable-ofono=builtin
    - --enable-openconnect=builtin
    - --enable-openvpn=builtin
    - --enable-loopback=builtin
    - --enable-pacrunner=builtin
    - --enable-client
    - --enable-test
    - --with-systemdunitdir=/%{_lib}/systemd/system

Files:
    - "%doc AUTHORS COPYING INSTALL ChangeLog NEWS README"
    - "%{_sbindir}/*"
    - "%{_libdir}/%{name}/scripts/*"
    - "%config %{_sysconfdir}/dbus-1/system.d/*.conf"
    - "/%{_lib}/systemd/system/connman.service"
    - "/%{_lib}/systemd/system/network.target.wants/connman.service"

SubPackages:
    - Name: devel
      Summary: Development files for Connection Manager
      Group: Development/Libraries
      Description: connman-devel contains development files for use with connman.
      Files:
        - "%doc AUTHORS COPYING INSTALL"
        - "%{_includedir}/%{name}/*.h"
        - "%{_libdir}/pkgconfig/*.pc"

    - Name: test
      Summary: Test Scripts for Connection Manager
      Group: Development/Tools
      Description: Scripts for testing Connman and its functionality
      Requires:
        - dbus-python
        - pygobject2
      Files:
        - "%{_libdir}/%{name}/test/*"

    - Name: tracing
      Summary: Configuration for Connection Manager to enable tracing
      Group: Development/Tools
      Description: Will enable tracing for ConnMan
      Files:
        - "%config %{_sysconfdir}/tracing/connman"
